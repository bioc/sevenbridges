<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="sevenbridges">
<title>Find Data on CGC via Data Browser and Datasets API • sevenbridges</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Find Data on CGC via Data Browser and Datasets API">
<meta property="og:description" content="sevenbridges">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sevenbridges</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.29.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/api.html">Complete Guide for Seven Bridges API R Client</a>
    <a class="dropdown-item" href="../articles/apps.html">Describe and Execute CWL Tools/Workflows in R</a>
    <a class="dropdown-item" href="../articles/bioc-workflow.html">Master Tutorial: Use R for Cancer Genomics Cloud</a>
    <a class="dropdown-item" href="../articles/cgc-datasets.html">Find Data on CGC via Data Browser and Datasets API</a>
    <a class="dropdown-item" href="../articles/docker.html">Creating Your Docker Container and Command Line Interface (with docopt)</a>
    <a class="dropdown-item" href="../articles/rstudio.html">IDE Container: RStudio Server, Shiny Server, and More</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sbg/sevenbridges-r/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Find Data on CGC via Data Browser and Datasets API</h1>
            
            <h4 data-toc-skip class="date">2023-04-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sbg/sevenbridges-r/blob/HEAD/vignettes/cgc-datasets.Rmd" class="external-link"><code>vignettes/cgc-datasets.Rmd</code></a></small>
      <div class="d-none name"><code>cgc-datasets.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introdution">Introdution<a class="anchor" aria-label="anchor" href="#introdution"></a>
</h2>
<p>There are currently three ways to find the data you need on CGC:</p>
<ul>
<li>Most easy: use our powerful and pretty GUI called ‘data explorer’
interactively on the platform, please read the tutorial <a href="http://docs.cancergenomicscloud.org/docs/about-the-data-browser" class="external-link">here</a>.</li>
<li>Most advanced: for advanced user, please SPARQL query directly <a href="http://docs.cancergenomicscloud.org/docs/query-via-sparql" class="external-link">tutorial</a>.</li>
<li>Most sweet: use CGC Datasets API, by creating a query list in R
(comming soon).</li>
</ul>
</div>
<div class="section level2">
<h2 id="graphical-data-browser">Graphical Data Browser<a class="anchor" aria-label="anchor" href="#graphical-data-browser"></a>
</h2>
<p>Please read the tutorial <a href="http://docs.cancergenomicscloud.org/docs/about-the-data-browser" class="external-link">here</a>.</p>
</div>
<div class="section level2">
<h2 id="datasets-api">Datasets API<a class="anchor" aria-label="anchor" href="#datasets-api"></a>
</h2>
<p>Please read the <a href="http://docs.cancergenomicscloud.org/docs/datasets-api-overview" class="external-link">tutorials</a>
first.</p>
<div class="section level3">
<h3 id="browse-tcga-via-the-datasets-api">Browse TCGA via the Datasets API<a class="anchor" aria-label="anchor" href="#browse-tcga-via-the-datasets-api"></a>
</h3>
<p>Doing a HTTP <code>GET</code> on this endpoint one will get a
resource with links to all entities in the dataset. Following these
links (doing an HTTP <code>GET</code> on them) one will go to a list of
entities (for example <code>/files</code>) from TCGA dataset identified
with their proper URL. Further following one of these links you’ll get a
particular resource (if we went to <code>/files</code>, we’ll get a
description of a particular file) with all specific properties like id,
label, etc. and links to other entities that are connected to a specific
resource (for example <code>/cases</code>) that you can explore further.
From there on, the process repeats as long as you follow the links.</p>
<div class="section level4">
<h4 id="return-datasets-accessible-trough-the-cgc">Return datasets accessible trough the CGC<a class="anchor" aria-label="anchor" href="#return-datasets-accessible-trough-the-cgc"></a>
</h4>
<p>Create an Auth object with your token, make sure you are using the
correct URL.</p>
<ul>
<li><code>https://cgc-datasets-api.sbgenomics.com/</code></li>
</ul>
<p>use <code>Auth$api()</code> method so there is no need to type base
URL or token again.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://www.sevenbridges.com" class="external-link">"sevenbridges"</a></span><span class="op">)</span></span>
<span><span class="co"># create an Auth object</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Auth-class.html">Auth</a></span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="st">"https://cgc-datasets-api.sbgenomics.com/"</span>,</span>
<span>  token <span class="op">=</span> <span class="st">"your_cgc_token"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="fu">api</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"datasets"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="return-list-of-all-tcga-entities">Return list of all TCGA entities<a class="anchor" aria-label="anchor" href="#return-list-of-all-tcga-entities"></a>
</h4>
<p>You can issue another <code>GET</code> request to the href of the
tcga object, if you want to access TCGA data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Auth-class.html">Auth</a></span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="st">"https://cgc-datasets-api.sbgenomics.com/datasets/tcga/v0"</span>,</span>
<span>  token <span class="op">=</span> <span class="st">"your_cgc_token"</span></span>
<span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">res</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="fu">api</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="co"># default method is GET</span></span>
<span><span class="co"># list all resources/entities</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="st">"_links"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="interpreting-the-list-of-all-entities">Interpreting the list of all entities<a class="anchor" aria-label="anchor" href="#interpreting-the-list-of-all-entities"></a>
</h4>
<p>For example, to see a list of all TCGA files, send the request:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">res</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="fu">api</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"files"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>For example, to see the <strong>metadata schema</strong> for files
send the request:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">$</span><span class="fu">api</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"files/schema"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="copy-files-to-you-project">Copy files to you project<a class="anchor" aria-label="anchor" href="#copy-files-to-you-project"></a>
</h4>
<p>Get file id from Datasets API, then use public API to copy files.
Make sure your project is “TCGA” compatible, otherwise if you are trying
to copy controlled access data to your non-TCGA project, you will
get</p>
<pre><code><span><span class="st">"HTTP Status 403: Insufficient privileges to access the requested file."</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">res</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="fu">api</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"files"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">get_id</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">obj</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">obj</span><span class="op">$</span><span class="st">"_embedded"</span><span class="op">$</span><span class="va">files</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">$</span><span class="va">id</span><span class="op">)</span></span>
<span><span class="va">ids</span> <span class="op">&lt;-</span> <span class="fu">get_id</span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create CGC auth</span></span>
<span><span class="va">a_cgc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Auth-class.html">Auth</a></span><span class="op">(</span>platform <span class="op">=</span> <span class="st">"cgc"</span>, token <span class="op">=</span> <span class="va">a</span><span class="op">$</span><span class="va">token</span><span class="op">)</span></span>
<span><span class="va">a_cgc</span><span class="op">$</span><span class="fu">copyFile</span><span class="op">(</span>id <span class="op">=</span> <span class="va">ids</span>, project <span class="op">=</span> <span class="st">"RFranklin/tcga-demo"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="post-with-query">Post with query<a class="anchor" aria-label="anchor" href="#post-with-query"></a>
</h3>
<p>endpoint user can filter collection resources by using a DSL in JSON
format that translates as a subset of SPARQL. Main advantage here is
that an end user gets the subset SPARQL expressiveness without the need
to learn SPARQL specification.</p>
<div class="section level4">
<h4 id="find-samples-connected-to-a-case">Find samples connected to a case<a class="anchor" aria-label="anchor" href="#find-samples-connected-to-a-case"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">body</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  entity <span class="op">=</span> <span class="st">"samples"</span>,</span>
<span>  hasCase <span class="op">=</span> <span class="st">"0004D251-3F70-4395-B175-C94C2F5B1B81"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="fu">api</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"query"</span>, body <span class="op">=</span> <span class="va">body</span>, method <span class="op">=</span> <span class="st">"POST"</span><span class="op">)</span></span></code></pre></div>
<p>Count samples connected to a case</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">$</span><span class="fu">api</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"query/total"</span>, body <span class="op">=</span> <span class="va">body</span>, method <span class="op">=</span> <span class="st">"POST"</span><span class="op">)</span></span></code></pre></div>
<p>Issuing a <code>GET</code> request to the href path will return the
following data:</p>
<p>Note: <code>api</code> function is a light layer of httr package,
it’s different from <code>Auth$api</code> call.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">httr</span><span class="fu">::</span><span class="fu"><a href="https://httr.r-lib.org/reference/content.html" class="external-link">content</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/api.html">api</a></span><span class="op">(</span></span>
<span>    token <span class="op">=</span> <span class="va">a</span><span class="op">$</span><span class="va">token</span>,</span>
<span>    base_url <span class="op">=</span> <span class="st">"https://cgc-datasets-api.sbgenomics.com/datasets/tcga/v0/samples/9259E9EE-7279-4B62-8512-509CB705029C"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="find-cases-with-given-age-at-diagnosis">Find cases with given age at diagnosis<a class="anchor" aria-label="anchor" href="#find-cases-with-given-age-at-diagnosis"></a>
</h4>
<p>Suppose you want to see all cases for which the age at diagnosis is
between 10 and 50. Then, you use the following query.</p>
<p>Note that the value of the metadata field hasAgeAtDiagnosis is a
dictionary containing the keyfilter, whose value is a further dictionary
with keysgt(greater than) and lt (less than) for the upper and lower
bounds to filter by.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">body</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"entity"</span> <span class="op">=</span> <span class="st">"cases"</span>,</span>
<span>  <span class="st">"hasAgeAtDiagnosis"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"filter"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="st">"gt"</span> <span class="op">=</span> <span class="fl">10</span>,</span>
<span>      <span class="st">"lt"</span> <span class="op">=</span> <span class="fl">50</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="fu">api</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"query"</span>, body <span class="op">=</span> <span class="va">body</span>, method <span class="op">=</span> <span class="st">"POST"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="find-cases-with-a-given-age-at-diagnosis-and-disease">Find cases with a given age at diagnosis and disease<a class="anchor" aria-label="anchor" href="#find-cases-with-a-given-age-at-diagnosis-and-disease"></a>
</h4>
<p>Suppose you want to see all cases that, as in the example, (<a href="#find-cases-with-given-age-at-diagnosis">Find cases with given age
at diagnosis</a>)(doc:find-all-cases-with-a-given-age-at-diagnosis),
have an age at diagnosis of between 10 and 50, but that also have the
disease “Kidney Chromophobe”. Then, use the following query:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">body</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"entity"</span> <span class="op">=</span> <span class="st">"cases"</span>,</span>
<span>  <span class="st">"hasAgeAtDiagnosis"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"filter"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="st">"gt"</span> <span class="op">=</span> <span class="fl">10</span>,</span>
<span>      <span class="st">"lt"</span> <span class="op">=</span> <span class="fl">50</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="st">"hasDiseaseType"</span> <span class="op">=</span> <span class="st">"Kidney Chromophobe"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="fu">api</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"query"</span>, body <span class="op">=</span> <span class="va">body</span>, method <span class="op">=</span> <span class="st">"POST"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="complex-example-for-filtering-tcga-data">Complex example for filtering TCGA data<a class="anchor" aria-label="anchor" href="#complex-example-for-filtering-tcga-data"></a>
</h4>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">body</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"entity"</span> <span class="op">=</span> <span class="st">"cases"</span>,</span>
<span>  <span class="st">"hasSample"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"hasSampleType"</span> <span class="op">=</span> <span class="st">"Primary Tumor"</span>,</span>
<span>    <span class="st">"hasPortion"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="st">"hasPortionNumber"</span> <span class="op">=</span> <span class="fl">11</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="st">"hasNewTumorEvent"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"hasNewTumorAnatomicSite"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Liver"</span>, <span class="st">"Pancreas"</span><span class="op">)</span>,</span>
<span>    <span class="st">"hasNewTumorEventType"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="st">"filter"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        <span class="st">"contains"</span> <span class="op">=</span> <span class="st">"Recurrence"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">a</span><span class="op">$</span><span class="fu">api</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"query"</span>, body <span class="op">=</span> <span class="va">body</span>, method <span class="op">=</span> <span class="st">"POST"</span><span class="op">)</span></span></code></pre></div>
<p>Issuing a <code>GET</code> request to the href path</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">httr</span><span class="fu">::</span><span class="fu"><a href="https://httr.r-lib.org/reference/content.html" class="external-link">content</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/api.html">api</a></span><span class="op">(</span></span>
<span>    token <span class="op">=</span> <span class="va">a</span><span class="op">$</span><span class="va">token</span>,</span>
<span>    base_url <span class="op">=</span> <span class="st">"https://cgc-datasets-api.sbgenomics.com/datasets/tcga/v0/cases/0004D251-3F70-4395-B175-C94C2F5B1B81"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="query-with-multiple-filters-on-a-case">Query with multiple filters on a case<a class="anchor" aria-label="anchor" href="#query-with-multiple-filters-on-a-case"></a>
</h4>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">get_id</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">obj</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">obj</span><span class="op">$</span><span class="st">"_embedded"</span><span class="op">$</span><span class="va">files</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">$</span><span class="va">id</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span></span>
<span><span class="va">body</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"entity"</span> <span class="op">=</span> <span class="st">"cases"</span>,</span>
<span>  <span class="st">"hasSample"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"hasSampleType"</span> <span class="op">=</span> <span class="st">"Primary Tumor"</span>,</span>
<span>    <span class="st">"hasPortion"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="st">"hasPortionNumber"</span> <span class="op">=</span> <span class="fl">11</span>,</span>
<span>      <span class="st">"hasID"</span> <span class="op">=</span> <span class="st">"TCGA-DD-AAVP-01A-11"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="st">"hasNewTumorEvent"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"hasNewTumorAnatomicSite"</span> <span class="op">=</span> <span class="st">"Liver"</span>,</span>
<span>    <span class="st">"hasNewTumorEventType"</span> <span class="op">=</span> <span class="st">"Intrahepatic Recurrence"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="op">(</span><span class="va">res</span> <span class="op">&lt;-</span> <span class="va">a</span><span class="op">$</span><span class="fu">api</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"files"</span>, body <span class="op">=</span> <span class="va">body</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">get_id</span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Phil Webster, Soner Koc, Nan Xiao, Tengfei Yin, Velsera.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
